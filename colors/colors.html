<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="theme-color" content="#232526">
    <link rel="icon" href="img/favicon.png">

    <title>Playground - Pranav Jain - @pranavj1001</title>

    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

  </head>

  <body>

    <div class="center">
      <input id="hexText" type="text" placeholder="#333333" onkeyup="calculateRGB(value)"/>
      <input id="rgbText" type="text" placeholder="rgb(51,51,51)" />
    </div>

    <script type="text/javascript" src="tinycolor.js"></script>
    <script type="text/javascript">

    // logic to convert hex to rgb
    const hexToRgb = (hex) => {
      // Expand shorthand form (e.g. "03F") to full form (e.g. "0033FF")
      console.log(hex);
      let shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
      hex = hex.replace(shorthandRegex, (m, r, g, b) => (r + r + g + g + b + b));

      let result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      } : null;
    };

    const calculateRGB = (hex) => {
      const result = hexToRgb(hex);
      if (result !== null) {
        // set background color
        let inputs = document.querySelectorAll('input');
        if (hex.charAt(0) === '#') {
          if(tinycolor(hex).isLight()) {
            inputs[0].style.color = '#555';
            inputs[1].style.color = '#555';
          } else {
            inputs[0].style.color = '#fff';
            inputs[1].style.color = '#fff';
          }
          document.body.style.backgroundColor = `${hex}`;
          inputs[0].style.backgroundColor = `${hex}`;
          inputs[1].style.backgroundColor = `${hex}`;
        } else {
          if(tinycolor(hex).isLight()) {
            inputs[0].style.color = '#555';
            inputs[1].style.color = '#555';
          } else {
            inputs[0].style.color = '#fff';
            inputs[1].style.color = '#fff';
          }
          document.body.style.backgroundColor = `#${hex}`;
          inputs[0].style.backgroundColor = `#${hex}`;
          inputs[1].style.backgroundColor = `#${hex}`;
        }

        // print converted rgb result

      }
    };

    </script>

  </body>
</html>
